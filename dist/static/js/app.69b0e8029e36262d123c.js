webpackJsonp([1],{"7Mgc":function(t,e){},F8Cb:function(t,e){},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("div",[e("img",{attrs:{src:r("m/9r")}}),this._v(" "),e("router-view")],1),this._v(" "),this._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"page-footer font-small blue-grey lighten-5 pt-0 footer"},[e("a",{attrs:{href:"https://meraki.io"}},[this._v("Meraki.io")])])}]};var n=r("VU/8")({name:"App"},o,!1,function(t){r("NV5j")},null,null).exports,a=r("/ocq"),i=r("Xxa5"),c=r.n(i),l=r("exGp"),m=r.n(l),u={name:"Success",props:["customer"],data:function(){return{firstName:""}},created:function(){console.log("success page, customer",this.customer),this.firstName=this.customer.FirstName}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"card"},[e("h2",[this._v("Welcome home "+this._s(this.firstName))]),this._v(" "),e("img",{attrs:{src:r("r2Tz"),height:"100%",width:"100%",alt:"Hotel Room"}})])])},staticRenderFns:[]};var f=r("VU/8")(u,h,!1,function(t){r("7Mgc")},null,null).exports,p={name:"Login",components:{"success-page":f},data:function(){return{clientMac:"",baseGrantUrl:"",userContinueUrl:"",successUrl:"/success",clientIp:"",nodeMac:"",customer:{},form:{lastName:"",room:"",email:"",terms:!1}}},computed:{loginUrl:function(){return this.baseGrantUrl+"?continue_url="+this.successUrl+"&first_name="+this.customer.FirstName},authenticated:function(){return this.customer.authorized}},created:function(){console.log("route query",this.$route.query),this.clientMac=this.$route.query.client_mac,this.baseGrantUrl=this.$route.query.base_grant_url,this.userContinueUrl=this.$route.query.user_continue_url,this.clientIp=this.$route.query.client_ip,this.nodeMac=this.$route.query.node_mac},methods:{onSubmit:function(){var t=this;this.form.email?this.mewsAuthEmail().then(function(e){var r=e.data;t.customer=r,r.authorized?(console.log("mewsAuthEmail success"),t.login()):console.log("mewAuthEmail failed. Aborting login")}):this.form.lastName&&(console.log("authenticating with name and room"),this.mewsAuthNameRoom().then(function(e){console.log("mewsAuthNameRoom res",e.data);var r=e.data;t.customer=r,r.authenticated?(console.log("mewsAuthNameRoom success"),t.login()):console.log("mewAuthNameRoom failed. Aborting login")}))},mewsAuthEmail:function(){return this.axios.post("/mews/authEmail",{email:this.form.email}).then(function(t){return t})},mewsAuthNameRoom:function(){return this.axios.post("/mews/authNameRoom",{lastName:this.form.lastName,roomNumber:this.form.roomNumber}).then(function(t){return t})},merakiLogin:function(){console.log("Form data submitted"),this.baseGrantUrl?(this.log(),console.log("Redirecting to base_grant_url: ",this.loginUrl),window.open(this.loginUrl,"_blank","location=yes,height=570,width=520,scrollbars=no,status=yes")):console.log("login failed, no base grant url")},merakiPolicy:function(){var t=this;return m()(c.a.mark(function e(){var r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={clientMac:t.clientMac,deviceMac:t.nodeMac,form:t.form},e.next=3,t.axios.put("/meraki/policy",r).then(function(t){return console.log("Policy applied",t),t},function(t){console.log("Error: Could not apply policy: ",t)});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,t)}))()},login:function(){var t=this;return m()(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.merakiPolicy();case 2:e.sent,t.merakiLogin();case 4:case"end":return e.stop()}},e,t)}))()},log:function(){var t={customer:this.customer,clientMac:this.clientMac,clientIp:this.clientIp,nodeMac:this.nodeMac,userContinueUrl:this.userContinueUrl};console.log("log data",t),this.axios.post("/log",t).then(function(t){return console.log("remote session logging",t)})}}},d={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.authenticated?t._e():r("div",{staticClass:"col-sm-10 offset-sm-1 offset-md-4 col-md-4 text-center"},[r("div",{staticClass:"card mx-md-4"},[r("div",{staticClass:"card-body"},[r("form",{on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("p",{staticClass:"h4 text-center py-4"},[t._v("WiFi Access")]),t._v(" "),r("label",{staticClass:"grey-text font-weight-light",attrs:{for:"lastName"}},[t._v("Last Name")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.lastName,expression:"form.lastName"}],staticClass:"form-control",attrs:{type:"text",id:"lastName",placeholder:"Doe"},domProps:{value:t.form.lastName},on:{input:function(e){e.target.composing||t.$set(t.form,"lastName",e.target.value)}}}),t._v(" "),r("br"),t._v(" "),r("label",{staticClass:"grey-text font-weight-light",attrs:{for:"roomNumber"}},[t._v("Room Number")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.roomNumber,expression:"form.roomNumber"}],staticClass:"form-control",attrs:{type:"text",id:"roomNumber",placeholder:"A388-4"},domProps:{value:t.form.roomNumber},on:{input:function(e){e.target.composing||t.$set(t.form,"roomNumber",e.target.value)}}}),t._v(" "),r("hr"),t._v(" "),t._m(0),t._v(" "),r("br"),t._v(" "),r("label",{staticClass:"grey-text font-weight-light",attrs:{for:"email"}},[t._v("Email")]),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{type:"email",id:"email",placeholder:"john@doe.com"},domProps:{value:t.form.email},on:{input:function(e){e.target.composing||t.$set(t.form,"email",e.target.value)}}}),t._v(" "),r("br"),t._v(" "),r("hr"),t._v(" "),t._m(1),t._v(" "),r("input",{directives:[{name:"model",rawName:"v-model",value:t.form.terms,expression:"form.terms"}],attrs:{type:"checkbox",required:"true",id:"terms"},domProps:{checked:Array.isArray(t.form.terms)?t._i(t.form.terms,null)>-1:t.form.terms},on:{change:function(e){var r=t.form.terms,s=e.target,o=!!s.checked;if(Array.isArray(r)){var n=t._i(r,null);s.checked?n<0&&t.$set(t.form,"terms",r.concat([null])):n>-1&&t.$set(t.form,"terms",r.slice(0,n).concat(r.slice(n+1)))}else t.$set(t.form,"terms",o)}}}),t._v(" "),t._m(2)])])])]),t._v(" "),t.authenticated?r("div",{staticClass:"col-sm-10 offset-sm-1 offset-md-4 col-md-4 text-center"},[r("div",{staticClass:"card"},[r("h4",[t._v("Account Verified")]),t._v(" "),r("success-page",{attrs:{customer:t.customer.customer}}),t._v(" "),r("p",[t._v("You are being logged into the network. If you have a pop-up blocker, click "),r("a",{attrs:{href:t.loginUrl}},[t._v("here")]),t._v(".")])],1),t._v(" "),r("p",{staticClass:"details"},[r("label",[t._v("Client MAC | ")]),t._v(" "+t._s(t.clientMac))])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[e("i",[e("b",[this._v("or")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"terms"}},[e("a",{attrs:{href:"/terms"}},[this._v("Agree to T&S")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-center py-4 mt-3"},[e("button",{staticClass:"btn btn-outline-primary",attrs:{type:"submit"}},[this._v("Login"),e("i",{staticClass:"fa fa-paper-plane-o ml-2"})])])}]};var v=r("VU/8")(p,d,!1,function(t){r("F8Cb")},null,null).exports,g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h1",[this._v("Terms of Serice")]),this._v(" "),e("ul",[e("li",[this._v("Don't do anything bad")]),this._v(" "),e("li",[this._v("We respect your privacy")])])])}]};var _=r("VU/8")({name:"HelloWorld",data:function(){return{}}},g,!1,function(t){r("m1b2")},"data-v-c660e5ba",null).exports;s.a.use(a.a);var b=new a.a({mode:"history",routes:[{path:"/",name:"Login",component:v},{path:"/terms",name:"Terms",component:_},{path:"/success",name:"Success",component:f}]}),N=r("mtWM"),y=r.n(N),w=r("Rf8U"),x=r.n(w);s.a.use(x.a,y.a),s.a.config.productionTip=!1,new s.a({el:"#app",router:b,components:{App:n},template:"<App/>"})},NV5j:function(t,e){},"m/9r":function(t,e,r){t.exports=r.p+"static/img/transparent_legos-192px.5a3b573.png"},m1b2:function(t,e){},r2Tz:function(t,e,r){t.exports=r.p+"static/img/bedBeachView.8e8b7e8.jpg"}},["NHnr"]);
//# sourceMappingURL=app.69b0e8029e36262d123c.js.map